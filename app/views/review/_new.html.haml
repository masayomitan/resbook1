
= render 'review/raty'

.review
  = form_for @review do |f|
    = f.hidden_field :restaurant_id, value: @restaurant.id
    = f.text_field :comment, class: "text-field"

    #star
    = f.label :raty,'評価 '
    = f.hidden_field :star, id: :reviews

    :javascript
      $(document).on('turbolinks:load', function() {
        jQuery(function($){
        $('#star').raty({
          size     :      36,
          starOff:  '#{asset_path('star-off.png')}',
          starOn:  '#{asset_path('star-on.png')}',
          starHalf: '#{asset_path('star-half.png')}',
          scoreName: 'review[star]',
          half: true,
        });
      });
      })

    -#   $(document).on('turbolinks:load', function() {
    -#     $('.star1').raty({
    -#         space: false,
    -#         size     : 36,
    -#         readOnly: true,
    -#         starOff:  '<%= asset_path('star-off.png') %>',
    -#         starOn : '<%= asset_path('star-on.png') %>',
            score:function() {　　　　　　　　　 //ここを変更したら表示できるようになった。
            return $(this).attr('data-rating');//
    -#         }
    -#     });
    -# });
    = f.submit '評価する', class: "submit-btn"

.review-text
  .review-text-box
  .review-text-name
    - @reviews.each do |r|
      = r.user.name
      .review-text-comment
        = r.comment